<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Noto Serif SC:300,300italic,400,400italic,700,700italic|Source Code Pro:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-big-counter.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"framist.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"default"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Operating System Concepts Exercises 3Operating-System Structures  操作系统作业3  “uptime” command Code Examples of Message queue (POSIX, System V) 3.1, 3.5 3.8, 3.9, 3.12, 3.13, 3.14, 3.17  每题最后一个引用块是老师提供的参">
<meta property="og:type" content="article">
<meta property="og:title" content="【操作系统概念-作业3】Operating-System Structures">
<meta property="og:url" content="https://framist.github.io/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E4%B8%89/index.html">
<meta property="og:site_name" content="Framist&#39;s Little House">
<meta property="og:description" content="Operating System Concepts Exercises 3Operating-System Structures  操作系统作业3  “uptime” command Code Examples of Message queue (POSIX, System V) 3.1, 3.5 3.8, 3.9, 3.12, 3.13, 3.14, 3.17  每题最后一个引用块是老师提供的参">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-06-01T03:42:46.227Z">
<meta property="article:modified_time" content="2021-10-08T10:57:50.430Z">
<meta property="article:author" content="Framist">
<meta property="article:tag" content="学习">
<meta property="article:tag" content="操作系统">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://framist.github.io/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E4%B8%89/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>【操作系统概念-作业3】Operating-System Structures | Framist's Little House</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Framist's Little House</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">◇ 自顶而下 - 面向未来 ◇</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://framist.github.io/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E4%B8%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Framist">
      <meta itemprop="description" content="框架主义者的小窝">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Framist's Little House">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          【操作系统概念-作业3】Operating-System Structures
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-01 11:42:46" itemprop="dateCreated datePublished" datetime="2021-06-01T11:42:46+08:00">2021-06-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-08 18:57:50" itemprop="dateModified" datetime="2021-10-08T18:57:50+08:00">2021-10-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E4%B8%9A%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">课业学习</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E4%B8%9A%E5%AD%A6%E4%B9%A0/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">操作系统</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Operating-System-Concepts-Exercises-3"><a href="#Operating-System-Concepts-Exercises-3" class="headerlink" title="Operating System Concepts Exercises 3"></a><em>Operating System Concepts</em> Exercises 3</h1><center>Operating-System Structures</center>

<p>操作系统作业3</p>
<ul>
<li>“uptime” command</li>
<li>Code Examples of <strong>Message queue</strong> (POSIX, System V)</li>
<li>3.1, 3.5</li>
<li>3.8, 3.9, 3.12, 3.13, 3.14, 3.17</li>
</ul>
<p><em>每题最后一个引用块是老师提供的参考答案</em></p>
<a id="more"></a>

<h2 id="uptime-command"><a href="#uptime-command" class="headerlink" title="uptime command"></a><code>uptime</code> command</h2><p>参考：<a target="_blank" rel="noopener" href="https://wangchujiang.com/linux-command/c/uptime.html">uptime 命令，Linux uptime 命令详解：查看Linux系统负载信息 - Linux 命令搜索引擎 (wangchujiang.com)</a></p>
<blockquote>
<p>查看Linux系统负载信息</p>
<p><strong>uptime命令</strong> 能够打印系统总共运行了多长时间和系统的平均负载。uptime命令可以显示的信息显示依次为：现在时间、系统已经运行了多长时间、目前有多少登陆用户、系统在过去的1分钟、5分钟和15分钟内的平均负载。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime(选项)</span><br></pre></td></tr></table></figure>

<p>使用uptime命令查看系统负载：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@LinServ-1 ~]# uptime -V    #显示uptime命令版本信息</span><br><span class="line">procps version 3.2.7</span><br><span class="line"></span><br><span class="line">[root@LinServ-1 ~]# uptime</span><br><span class="line">15:31:30 up 127 days,  3:00,  1 user,  load average: 0.00, 0.00, 0.00</span><br></pre></td></tr></table></figure>

<p><strong>显示内容说明：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">15:31:30             # 系统当前时间</span><br><span class="line">up 127 days,  3:00   # 主机已运行时间,时间越大，说明你的机器越稳定。</span><br><span class="line">1 user               # 用户连接数，是总连接数而不是用户数</span><br><span class="line">load average: 0.00, 0.00, 0.00         #  系统平均负载，统计最近1，5，15分钟的系统平均负载</span><br></pre></td></tr></table></figure>

<p>那么什么是系统平均负载呢？ 系统平均负载是指在特定时间间隔内运行队列中的平均进程数。</p>
<p>如果每个CPU内核的当前活动进程数不大于3的话，那么系统的性能是良好的。如果每个CPU内核的任务数大于5，那么这台机器的性能有严重问题。</p>
<p>如果你的linux主机是1个双核CPU的话，当Load Average 为6的时候说明机器已经被充分使用了。</p>
</blockquote>
<h2 id="Code-Examples-of-Message-queue-POSIX-System-V"><a href="#Code-Examples-of-Message-queue-POSIX-System-V" class="headerlink" title="Code Examples of Message queue (POSIX, System V)"></a>Code Examples of <code>Message queue</code> (POSIX, System V)</h2><h3 id="POSIX"><a href="#POSIX" class="headerlink" title="POSIX"></a>POSIX</h3><p>引用课本上的例子：</p>
<p>Producer process illustrating POSIX shared-memory API.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">/* the size (in bytes) of shared memory object */</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> SIZE = <span class="number">4096</span>;</span><br><span class="line">	<span class="comment">/* name of the shared memory object */</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *name = <span class="string">&quot;OS&quot;</span>;</span><br><span class="line">	<span class="comment">/* strings written to shared memory */</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *message_0 = <span class="string">&quot;Hello&quot;</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *message_1 = <span class="string">&quot;World!&quot;</span>;</span><br><span class="line">	<span class="comment">/* shared memory file descriptor */</span></span><br><span class="line">	<span class="keyword">int</span> shm_fd;</span><br><span class="line">	<span class="comment">/* pointer to shared memory obect */</span></span><br><span class="line">	<span class="keyword">void</span> *ptr;</span><br><span class="line">	<span class="comment">/* create the shared memory object */</span></span><br><span class="line">	shm_fd = shm_open(name, O_CREAT | O_RDRW, <span class="number">0666</span>);</span><br><span class="line">	<span class="comment">/* configure the size of the shared memory object */</span></span><br><span class="line">	ftruncate(shm_fd, SIZE);</span><br><span class="line">	<span class="comment">/* memory map the shared memory object */</span></span><br><span class="line">	ptr = mmap(<span class="number">0</span>, SIZE, PROT_WRITE, MAP_SHARED, shm_fd, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">/* write to the shared memory object */</span></span><br><span class="line">	<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%s&quot;</span>, message_0);</span><br><span class="line">	ptr += <span class="built_in">strlen</span>(message_0);</span><br><span class="line">	<span class="built_in">sprintf</span>(ptr, <span class="string">&quot;%s&quot;</span>, message_1);</span><br><span class="line">	ptr += <span class="built_in">strlen</span>(message_1);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Producer process illustrating POSIX shared-memory API.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/shm.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">/* the size (in bytes) of shared memory object */</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> SIZE <span class="number">4096</span>;</span><br><span class="line">	<span class="comment">/* name of the shared memory object */</span></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> *name = <span class="string">&quot;OS&quot;</span>;</span><br><span class="line">	<span class="comment">/* shared memory file descriptor */</span></span><br><span class="line">	<span class="keyword">int</span> shm_fd;</span><br><span class="line">	<span class="comment">/* pointer to shared memory obect */</span></span><br><span class="line">	<span class="keyword">void</span> *ptr;</span><br><span class="line">	<span class="comment">/* open the shared memory object */</span></span><br><span class="line">	shm fd = shm open(name, O_RDONLY, <span class="number">0666</span>);</span><br><span class="line">	<span class="comment">/* memory map the shared memory object */</span></span><br><span class="line">	ptr = mmap(<span class="number">0</span>, SIZE, PROT_READ, MAP_SHARED, shm_fd, <span class="number">0</span>);</span><br><span class="line">	<span class="comment">/* read from the shared memory object */</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%s&quot;</span>, (<span class="keyword">char</span> *)ptr);</span><br><span class="line">	<span class="comment">/* remove the shared memory object */</span></span><br><span class="line">	<span class="function">shm <span class="title">unlink</span><span class="params">(name)</span></span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但不能成功运行</p>
<h3 id="System-V"><a href="#System-V" class="headerlink" title="System V"></a>System V</h3><p>参考：<a target="_blank" rel="noopener" href="https://feichashao.com/ipc-mq/">使用 System V message queue 实现进程间通信 – 肥叉烧 feichashao.com</a></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C Program for Message Queue (Writer Process)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// structure for message queue</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mesg_buffer</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> mesg_type;</span><br><span class="line">    <span class="keyword">char</span> mesg_text[<span class="number">100</span>];</span><br><span class="line">&#125; message;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">key_t</span> key;</span><br><span class="line">    <span class="keyword">int</span> msgid;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ftok to generate unique key</span></span><br><span class="line">    <span class="comment">// 每个程序都可以用相同的 pathname 和 proj_id 来获取相同的 key.</span></span><br><span class="line">    key = ftok(<span class="string">&quot;progfile&quot;</span>, <span class="number">65</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// msgget creates a message queue</span></span><br><span class="line">    <span class="comment">// and returns identifier</span></span><br><span class="line">    msgid = msgget(key, <span class="number">0666</span> | IPC_CREAT);</span><br><span class="line">    message.mesg_type = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// 获取用户输入</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Write Data : &quot;</span>);</span><br><span class="line">    gets(message.mesg_text);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// msgsnd to send message</span></span><br><span class="line">    msgsnd(msgid, &amp;message, <span class="keyword">sizeof</span>(message), <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// display the message</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Data send is : %s \n&quot;</span>, message.mesg_text);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// C Program for Message Queue (Reader Process)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/ipc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/msg.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// structure for message queue</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">mesg_buffer</span> &#123;</span></span><br><span class="line">    <span class="keyword">long</span> mesg_type;</span><br><span class="line">    <span class="keyword">char</span> mesg_text[<span class="number">100</span>];</span><br><span class="line">&#125; message;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">key_t</span> key;</span><br><span class="line">    <span class="keyword">int</span> msgid;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ftok to generate unique key</span></span><br><span class="line">    <span class="comment">// 使用跟 writer 相同的 pathname 和 proj_id 来获取 key.</span></span><br><span class="line">    key = ftok(<span class="string">&quot;progfile&quot;</span>, <span class="number">65</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// msgget creates a message queue</span></span><br><span class="line">    <span class="comment">// and returns identifier</span></span><br><span class="line">    msgid = msgget(key, <span class="number">0666</span> | IPC_CREAT);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// msgrcv to receive message</span></span><br><span class="line">    msgrcv(msgid, &amp;message, <span class="keyword">sizeof</span>(message), <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// display the message</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Data Received is : %s \n&quot;</span>,</span><br><span class="line">                    message.mesg_text);</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// to destroy the message queue</span></span><br><span class="line">    msgctl(msgid, IPC_RMID, <span class="literal">NULL</span>);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也不能成功运行……</p>
<p>==TODO==<em>马上就要交作业了，就先放在这里吧</em> </p>
<h2 id="Practice-Exercises"><a href="#Practice-Exercises" class="headerlink" title="Practice Exercises"></a>Practice Exercises</h2><p>3.1, 3.5</p>
<h3 id="3-1-Using-the-program-shown-in-Figure-3-30-explain-what-the-output-will-be-at-LINE-A"><a href="#3-1-Using-the-program-shown-in-Figure-3-30-explain-what-the-output-will-be-at-LINE-A" class="headerlink" title="3.1 Using the program shown in Figure 3.30, explain what the output will be at LINE A."></a>3.1 Using the program shown in Figure 3.30, explain what the output will be at LINE A.</h3><p>Figure 3.30 What output will be at Line A?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> value = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">pid_t</span> pid;</span><br><span class="line">	pid = fork();</span><br><span class="line">	<span class="keyword">if</span> (pid == <span class="number">0</span>) &#123; <span class="comment">/* child process */</span></span><br><span class="line">		value += <span class="number">15</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123; <span class="comment">/* parent process */</span></span><br><span class="line">		wait(<span class="literal">NULL</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;PARENT: value = %d&quot;</span>, value); <span class="comment">/* LINE A */</span></span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>答：</strong></p>
<p>output:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PARENT: value = 5%             </span><br></pre></td></tr></table></figure>

<p>子进程改变的是子进程的value值，当控制权给回父进程之后，他的值保持为5。</p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>The result is still 5 as the child updates its copy of value. When control returns to the parent, its value remains at 5.</p>
</blockquote>
<h3 id="3-5-When-a-process-creates-a-new-process-using-the-fork-operation-which-of-the-following-states-is-shared-between-the-parent-process-and-the-child-process"><a href="#3-5-When-a-process-creates-a-new-process-using-the-fork-operation-which-of-the-following-states-is-shared-between-the-parent-process-and-the-child-process" class="headerlink" title="3.5 When a process creates a new process using the fork() operation, which of the following states is shared between the parent process and the child process?"></a>3.5 When a process creates a new process using the fork() operation, which of the following states is shared between the parent process and the child process?</h3><ul>
<li><input disabled type="checkbox"> a. Stack </li>
<li><input disabled type="checkbox"> b. Heap </li>
<li><input checked disabled type="checkbox"> c. Shared memory segments</li>
</ul>
<p>a和b由子进程新建</p>
<p><strong>答：</strong></p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>Only the shared memory segments are shared between the parent process and the newly forked child process. Copies of the stack and the heap are made for the newly created process.</p>
</blockquote>
<h2 id="Exercises"><a href="#Exercises" class="headerlink" title="Exercises"></a>Exercises</h2><p>3.8, 3.9, 3.12, 3.13, 3.14, 3.17</p>
<h3 id="3-8-Describe-the-differences-among-short-term-medium-term-and-long-term-scheduling"><a href="#3-8-Describe-the-differences-among-short-term-medium-term-and-long-term-scheduling" class="headerlink" title="3.8 Describe the differences among short-term, medium-term, and long-term scheduling."></a>3.8 Describe the differences among short-term, medium-term, and long-term scheduling.</h3><p><strong>答：</strong></p>
<p>长期调度决定哪些进程进入到系统中。</p>
<p>中期调度决定进入到系统中的进程哪些可以竞争处理器， 即哪些进程可以进入到就绪队列。</p>
<p>短期调度决定将处理器分配给就绪队列中的哪些进程。</p>
<p><em>上面其实原指高级调度、中级调度、低级调度</em></p>
<blockquote>
<p><strong>Answer:</strong></p>
<p><strong>Short-term (CPU scheduler)</strong>: selects a process from those that are in memory and ready to execute, and allocates the CPU to it.</p>
<p><strong>Medium-term (memory manager)</strong>: selects a process from the ready or blocked queue and swaps them from memory to disk, then swaps them in later to continue running.</p>
<p><strong>Long-term (job scheduler)</strong>: determines which jobs are brought into memory from back store on disk for processing.</p>
<p>A primary difference is in the frequency of their execution.</p>
<p><strong>短期（CPU调度器）</strong>：从内存中准备执行的进程中选择一个进程，并将CPU分配给它。</p>
<p><strong>中期（内存管理器）</strong>：从准备好的或阻塞的队列中选择一个进程，把它们从内存中换到磁盘上，然后再把它们换进去继续运行。</p>
<p><strong>长期（作业调度器）</strong>：决定哪些作业从磁盘上的回存带入内存进行处理。</p>
<p>一个主要的区别在于其执行的频率。</p>
</blockquote>
<h3 id="3-9-Describe-the-actions-taken-by-a-kernel-to-context-switch-between-processes"><a href="#3-9-Describe-the-actions-taken-by-a-kernel-to-context-switch-between-processes" class="headerlink" title="3.9 Describe the actions taken by a kernel to context-switch between processes."></a>3.9 Describe the actions taken by a kernel to context-switch between processes.</h3><p><strong>答：</strong></p>
<p>内核在进行进程上下文切换时， 首先将当前进程的上下文保存在内存中的PCB中， 然后再将下一个进程在内存中的PCB里的上下文读取出来。 上下文包含CPU寄存器里的内容， 堆， 用户栈， 内存管理信息， 数据， 文本。</p>
<p>[3]</p>
<blockquote>
<p><strong>Answer:</strong></p>
<ol>
<li><p>In response to a clock interrupt, the OS saves the PC and user stack pointer of the currently executing process, and transfers control to the kernel clock interrupt handler,</p>
</li>
<li><p>The clock interrupt handler saves the rest of the registers, as well as other machine state, such as the state of the floating point registers, in the process PCB.</p>
</li>
<li><p>The OS invokes the scheduler to determine the next process to execute,</p>
</li>
<li><p>The OS then retrieves the state of the next process from its PCB, and restores the registers. This restore operation takes the processor back to the state in which this process was previously interrupted, executing in user code with user mode privileges.</p>
</li>
<li><p>作为对时钟中断的响应，操作系统保存当前执行进程的PC和用户堆栈指针，并将控制权转移到内核时钟中断处理程序。</p>
</li>
<li><p>时钟中断处理程序将其余的寄存器以及其他机器状态，如浮点寄存器的状态，保存在进程PCB中。</p>
</li>
<li><p>操作系统调用调度器来决定下一个要执行的进程。</p>
</li>
<li><p>然后操作系统从其PCB中检索下一个进程的状态，并恢复寄存器。这个恢复操作使处理器回到了这个进程之前被中断的状态，以用户模式权限执行用户代码。</p>
</li>
</ol>
</blockquote>
<h3 id="3-12-Including-the-initial-parent-process-how-many-processes-are-created-by-the-program-shown-in-Figure-3-32"><a href="#3-12-Including-the-initial-parent-process-how-many-processes-are-created-by-the-program-shown-in-Figure-3-32" class="headerlink" title="3.12 Including the initial parent process, how many processes are created by the program shown in Figure 3.32?"></a>3.12 Including the initial parent process, how many processes are created by the program shown in Figure 3.32?</h3><p>Figure 3.32 How many processes are created?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;#include &lt;unistd.h&gt;int main()&#123;    int i;    for (i = 0; i &lt; 4; i++)    	fork();	    return 0;&#125;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>答：</strong></p>
<p>共16个</p>
<p>因为fork是把进程<strong>当前</strong>的情况拷贝一份</p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>16</p>
</blockquote>
<h3 id="3-13-Explain-the-circumstances-under-which-which-the-line-of-code-marked-printf-“LINE-J”-in-Figure-3-33-will-be-reached"><a href="#3-13-Explain-the-circumstances-under-which-which-the-line-of-code-marked-printf-“LINE-J”-in-Figure-3-33-will-be-reached" class="headerlink" title="3.13 Explain the circumstances under which which the line of code marked printf(“LINE J”) in Figure 3.33 will be reached."></a>3.13 Explain the circumstances under which which the line of code marked printf(“LINE J”) in Figure 3.33 will be reached.</h3><p>Figure 3.33 When will LINE J be reached?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main()&#123;	pid_t pid;	/* fork a child process */	pid = fork();	if (pid &lt; 0) &#123; /* error occurred */		fprintf(stderr, &quot;Fork Failed&quot;);		return 1;	&#125; else if (pid == 0) &#123; /* child process */		execlp(&quot;/bin/ls&quot;, &quot;ls&quot;, NULL);		printf(&quot;LINE J&quot;);	&#125; else &#123; /* parent process */		/* parent will wait for the child to complete */		wait(NULL);		printf(&quot;Child Complete&quot;);	&#125;	return 0;&#125;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>答：</strong></p>
<p><code>execlp()</code>函数属于<code>exec()</code>函数族</p>
<p>如果<code>execlp</code>调用成功,进程自己的执行代码就会变成加载程序的代码,<code>execlp()</code>后边的代码也就不会执行了</p>
<p>所以无法到达<code>printf(“LINE J”)</code>代码</p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>The call to exec() replaces the address space of the process with the program specified as the parameter to exec(). If the call to exec() succeeds, the new program is now running and control from the call to exec() never returns. In this scenario, the line <em>printf(“Line J”);</em> would never be performed. </p>
<p>However, if an error occurs in the call to exec(), the function returns control and therefore the line <em>printf(“Line J”);</em> would be performed.</p>
</blockquote>
<h3 id="3-14-Using-the-program-in-Figure-3-34-identify-the-values-of-pid-at-lines-A-B-C-and-D-Assume-that-the-actual-pids-of-the-parent-and-child-are-2600-and-2603-respectively"><a href="#3-14-Using-the-program-in-Figure-3-34-identify-the-values-of-pid-at-lines-A-B-C-and-D-Assume-that-the-actual-pids-of-the-parent-and-child-are-2600-and-2603-respectively" class="headerlink" title="3.14 Using the program in Figure 3.34, identify the values of pid at lines A, B, C, and D. (Assume that the actual pids of the parent and child are 2600 and 2603, respectively.)"></a>3.14 Using the program in Figure 3.34, identify the values of pid at lines A, B, C, and D. (Assume that the actual pids of the parent and child are 2600 and 2603, respectively.)</h3><p>Figure 3.34 What are the pid values?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main()&#123;	pid—_t pid, pid1;	/* fork a child process */	pid = fork();	if (pid &lt; 0) &#123; /* error occurred */		fprintf(stderr, &quot;Fork Failed&quot;);		return 1;	&#125;	else if (pid == 0) &#123; /* child process */		pid1 = getpid();		printf(&quot;child: pid = %d&quot;, pid);	  /* A */		printf(&quot;child: pid1 = %d&quot;, pid1); /* B */	&#125;	else &#123; /* parent process */		pid1 = getpid();		printf(&quot;parent: pid = %d&quot;, pid);   /* C */		printf(&quot;parent: pid1 = %d&quot;, pid1); /* D */		wait(NULL);	&#125;	return 0;&#125;</span></span></span><br></pre></td></tr></table></figure>



<p><strong>答：</strong></p>
<p>A：0</p>
<p>B：2603</p>
<p>C：2603</p>
<p>D：2600</p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>A=0</p>
<p>B=2603</p>
<p>C=2603</p>
<p>D=2600</p>
</blockquote>
<h3 id="3-17-Using-the-program-shown-in-Figure-3-35-explain-what-the-output-will-be-at-lines-X-and-Y"><a href="#3-17-Using-the-program-shown-in-Figure-3-35-explain-what-the-output-will-be-at-lines-X-and-Y" class="headerlink" title="3.17 Using the program shown in Figure 3.35, explain what the output will be at lines X and Y."></a>3.17 Using the program shown in Figure 3.35, explain what the output will be at lines X and Y.</h3><p>Figure 3.35 What output will be at Line X and Line Y?</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#define SIZE 5int nums[SIZE] = &#123;0, 1, 2, 3, 4&#125;;int main()&#123;	int i;	pid_t pid;	pid = fork();	if (pid == 0) &#123;		for (i = 0; i &lt; SIZE; i++) &#123;			nums[i] *= -i;			printf(&quot;CHILD: %d &quot;, nums[i]); /* LINE X */		&#125;	&#125;	else if (pid &gt; 0) &#123;		wait(NULL);		for (i = 0; i &lt; SIZE; i++)			printf(&quot;PARENT: %d &quot;, nums[i]); /* LINE Y */	&#125;	return 0;&#125;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>答：</strong></p>
<p>output:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CHILD: 0 CHILD: -1 CHILD: -4 CHILD: -9 CHILD: -16 PARENT: 0 PARENT: 1 PARENT: 2 PARENT: 3 PARENT: 4</span><br></pre></td></tr></table></figure>

<p>父子进程变量不共享</p>
<blockquote>
<p><strong>Answer:</strong></p>
<p>Because the child is a copy of the parent, any changes the child makes will occur in its copy of the data and won’t be reflected in the parent. As a result, the values output by the child at line X are 0, -1, -4, -9, -16. The values output by the parent at line Y are 0, 1, 2, 3, 4<br>因为子程序是父程序的副本，子程序的任何改变都会发生在它的数据副本中，不会反映在父程序中。因此，子代在X行输出的值是0, -1, -4, -9, -16。父代在Y行输出的值是0, 1, 2, 3, 4</p>
</blockquote>
<hr>
<p><strong>注：</strong></p>
<p>翻译：deepl</p>
<p>参考资料：</p>
<p>[1] zhousiyu369的博客-CSDN博客</p>
<p>[2] Operating System Concepts – 9th Edition 及其答案</p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Framist
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://framist.github.io/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E4%B8%89/" title="【操作系统概念-作业3】Operating-System Structures">https://framist.github.io/2021/06/01/操作系统作业三/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%AD%A6%E4%B9%A0/" rel="tag"># 学习</a>
              <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"># 操作系统</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E4%BA%8C/" rel="prev" title="【操作系统概念-作业2】Operating-System Structures">
      <i class="fa fa-chevron-left"></i> 【操作系统概念-作业2】Operating-System Structures
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/06/01/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%BD%9C%E4%B8%9A%E5%9B%9B/" rel="next" title="【操作系统概念-作业4】Threads">
      【操作系统概念-作业4】Threads <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="gitalk-container"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Operating-System-Concepts-Exercises-3"><span class="nav-number">1.</span> <span class="nav-text">Operating System Concepts Exercises 3</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#uptime-command"><span class="nav-number">1.1.</span> <span class="nav-text">uptime command</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Code-Examples-of-Message-queue-POSIX-System-V"><span class="nav-number">1.2.</span> <span class="nav-text">Code Examples of Message queue (POSIX, System V)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#POSIX"><span class="nav-number">1.2.1.</span> <span class="nav-text">POSIX</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#System-V"><span class="nav-number">1.2.2.</span> <span class="nav-text">System V</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Practice-Exercises"><span class="nav-number">1.3.</span> <span class="nav-text">Practice Exercises</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-Using-the-program-shown-in-Figure-3-30-explain-what-the-output-will-be-at-LINE-A"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1 Using the program shown in Figure 3.30, explain what the output will be at LINE A.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-When-a-process-creates-a-new-process-using-the-fork-operation-which-of-the-following-states-is-shared-between-the-parent-process-and-the-child-process"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.5 When a process creates a new process using the fork() operation, which of the following states is shared between the parent process and the child process?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Exercises"><span class="nav-number">1.4.</span> <span class="nav-text">Exercises</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-Describe-the-differences-among-short-term-medium-term-and-long-term-scheduling"><span class="nav-number">1.4.1.</span> <span class="nav-text">3.8 Describe the differences among short-term, medium-term, and long-term scheduling.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-Describe-the-actions-taken-by-a-kernel-to-context-switch-between-processes"><span class="nav-number">1.4.2.</span> <span class="nav-text">3.9 Describe the actions taken by a kernel to context-switch between processes.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-12-Including-the-initial-parent-process-how-many-processes-are-created-by-the-program-shown-in-Figure-3-32"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.12 Including the initial parent process, how many processes are created by the program shown in Figure 3.32?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-13-Explain-the-circumstances-under-which-which-the-line-of-code-marked-printf-%E2%80%9CLINE-J%E2%80%9D-in-Figure-3-33-will-be-reached"><span class="nav-number">1.4.4.</span> <span class="nav-text">3.13 Explain the circumstances under which which the line of code marked printf(“LINE J”) in Figure 3.33 will be reached.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-14-Using-the-program-in-Figure-3-34-identify-the-values-of-pid-at-lines-A-B-C-and-D-Assume-that-the-actual-pids-of-the-parent-and-child-are-2600-and-2603-respectively"><span class="nav-number">1.4.5.</span> <span class="nav-text">3.14 Using the program in Figure 3.34, identify the values of pid at lines A, B, C, and D. (Assume that the actual pids of the parent and child are 2600 and 2603, respectively.)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-17-Using-the-program-shown-in-Figure-3-35-explain-what-the-output-will-be-at-lines-X-and-Y"><span class="nav-number">1.4.6.</span> <span class="nav-text">3.17 Using the program shown in Figure 3.35, explain what the output will be at lines X and Y.</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Framist</p>
  <div class="site-description" itemprop="description">框架主义者的小窝</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">56</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/framist" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;framist" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:framist@163.com" title="E-Mail → mailto:framist@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/weixin_47102975" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_47102975" rel="noopener" target="_blank"><i class="fas fa-angle-right fa-fw"></i>CSDN</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://framist.github.io/2020/10/11/%E6%88%91%E8%BA%AB%E8%BE%B9%E7%9A%84CS%E5%A4%A7%E4%BD%AC%E4%BB%AC/" title="https:&#x2F;&#x2F;framist.github.io&#x2F;2020&#x2F;10&#x2F;11&#x2F;%E6%88%91%E8%BA%AB%E8%BE%B9%E7%9A%84CS%E5%A4%A7%E4%BD%AC%E4%BB%AC&#x2F;">我身边的大佬们</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://yuexiavqiufeng.github.io/" title="https:&#x2F;&#x2F;yuexiavqiufeng.github.io&#x2F;" rel="noopener" target="_blank">yuexiavqiufeng</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://github.com/framist" title="https:&#x2F;&#x2F;github.com&#x2F;framist" rel="noopener" target="_blank">广告位招租</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-at"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Framist</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div><script>
    let body = document.getElementsByTagName('body')[0];
    body.addEventListener('click', (e) => {
        let contentArr = ['欧拉~','ˋ( ° ▽、° ) ','RGB!','_(:з」∠)_','哼','?','¿框架?','QAQ','背景的随机图片API貌似崩了',':3','<3','疯掉了'];
        let randomNum = function (n) {
            return Math.floor(Math.random() * n)
        }
        let span = document.createElement('span');
        span.innerHTML = `${contentArr[randomNum(contentArr.length)]}`;
        span.style.color = `rgb(${randomNum(256)},${randomNum(256)},${randomNum(256)})`;
        span.style.position = 'absolute';
        span.style.top = `${e.pageY}px`;
        span.style.left = `${e.pageX}px`;
        span.style.transition = 'all 1s ease';
        span.style.zIndex = 20000;
        body.appendChild(span)
        setTimeout(()=>{
            span.style.top = span.offsetTop - 25 + 'px';
            span.style.opacity = 0;
            setTimeout(()=>{span.remove()},700)
        },700)
    })
</script>




<script type="text/javascript" color="255,255,255" pointColor='255,255,255' opacity='0.5' zIndex="-1" count="233" src="https://cdn.jsdelivr.net/npm/canvas-nest.js@1/dist/canvas-nest.js"></script>

        
<div class="busuanzi-count">
  <script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script data-pjax>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















    <div id="pjax">
  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">

<script>
NexT.utils.loadComments(document.querySelector('#gitalk-container'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID    : '267a9d4a89b9b72b2229',
      clientSecret: '2dba1f14d21da707ed6c4497fecc05d6178b4fa3',
      repo        : 'blog-comment',
      owner       : 'framist',
      admin       : ['framist'],
      id          : '8542f4475264f01433930fa6c07af88b',
        language: 'zh-CN',
      distractionFreeMode: true
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
});
</script>

    </div>
</body>
</html>
